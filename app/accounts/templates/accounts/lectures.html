{% extends 'base.html' %}
{% load static %}
{% load custom_filters %}
{% block translationFolder %}data-translation-folder="lectures"{% endblock %}
{% block title %}Lectures{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row">
        <div class="col-md-12">
            <!-- Study Group Header Card -->
            <div class="form-header text-center">
                <h3 class="styled-title">
                    <span class="line"></span>
                    <span class="text">
                        <span class="icon"><i class="me-2 fas fa-chalkboard-user"></i></span>
                        <span data-translate="lectures">MY Lectures</span>
                    </span>
                    <span class="line"></span>
                </h3>
            </div>

            {% if lectures_with_files %}
                <div class="row">
                    {% for lecture_data in lectures_with_files %}
                        <div class="col-md-12 mb-4">
                            <!-- Lecture Card -->
                            <div class="card lecture-card shadow-sm hover-shadow">
                                <div class="card-header lecture-header" id="heading{{ forloop.counter }}">
                                    <h3 class="mb-0">
                                        <button class="btn btn-link btn-block text-start collapsed lecture-title-link" type="button" data-mdb-toggle="collapse" data-mdb-target="#collapse{{ forloop.counter }}" aria-expanded="false" aria-controls="collapse{{ forloop.counter }}">
                                            <i class="fas fa-book-open me-2 text-info"></i> {{ lecture_data.lecture.title }}
                                        </button>
                                    </h3>
                                </div>
                                <div id="collapse{{ forloop.counter }}" class="collapse" aria-labelledby="heading{{ forloop.counter }}" data-mdb-parent=".row">
                                    <div class="card-body">
                                        <p class="card-text text-muted">{{ lecture_data.lecture.description }}</p>
                                        <div class="d-flex justify-content-between align-items-center mt-3">
                                            <div>
                                                <i class="far fa-calendar-alt me-1 text-muted"></i> <small class="text-muted" data-translate="created_on">Created on:</small> {{ lecture_data.lecture.created|date:"m/d/Y" }}
                                            </div>
                                            {% if lecture_data.lecture.live_link %}
                                                <div>
                                                    <i class="fas fa-video me-1 text-primary"></i> <a href="{{ lecture_data.lecture.live_link }}" class="btn btn-sm btn-primary px-1 ripple-surface" data-translate="join_live_session">Join Live Session</a>
                                                </div>
                                            {% endif %}
                                        </div>

                                        <h4 class="mt-3 mb-2 text-secondary"><i class="fas fa-paperclip me-2"></i> <span data-translate="files">Files:</span></h4>
                                        {% if lecture_data.files %}
                                            <ul class="list-unstyled">
                                                {% for file in lecture_data.files %}
                                                    <li class="mb-1">
                                                        <i class="far fa-file-alt me-2 text-muted"></i> <a href="{{ file.file.url }}" class="text-decoration-none file-link" download>{{ file.file.name }}</a>
                                                    </li>
                                                {% endfor %}
                                            </ul>
                                        {% else %}
                                            <p class="text-muted"><small data-translate="no_files">No files attached to this lecture.</small></p>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <p class="text-center mt-4" data-translate="no_lectures">No lectures available for this study group yet.</p>
            {% endif %}

        </div>
    </div>
</div>


<style>
    .lecture-card {
        border-radius: 10px;
        border: 1px solid #e0e0e0;
        transition: all 0.3s ease;
    }

    .lecture-card:hover {
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        transform: translateY(-2px);
    }

    .lecture-header {
        padding: 10; /* Remove default padding from card-header */
        background-color: transparent; /* Make header background transparent */
        border-bottom: none; /* Remove default border-bottom from card-header */
    }

    .lecture-title-link {
        display: block; /* Make button full width of header */
        padding: 1.25rem 1.5rem; /* Add padding back, adjust as needed */
        color: inherit; /* Inherit text color from parent */
        text-decoration: none; /* Remove underline from button link */
        text-align: left; /* Align text to the left */
        font-weight: bold;
    }

    .lecture-title-link:hover,
    .lecture-title-link:focus {
        background-color: rgba(0, 0, 0, 0.03); /* Light background on hover/focus */
        color: inherit; /* Keep text color on hover/focus */
        text-decoration: none; /* Remove underline on hover/focus */
        box-shadow: none; /* Remove any button box-shadow */
    }

    
    .lecture-title-link .fas.fa-book-open::before {
        content: "\f07c"; /* Keep book open icon when expanded */
    }


    .lecture-card .card-body {
        padding-top: 0; /* Reduce padding at the top of the body to align with header visually */
    }

    .lecture-card .card-title {
        margin-bottom: 0.75rem; /* Adjust title spacing */
    }

    .lecture-card .card-text {
        color: #555; /* Slightly darker text color for description */
    }

    .file-link {
        color: #007bff; /* Primary color for file links */
        font-weight: 500;
    }

    .file-link:hover {
        color: #0056b3; /* Darker shade on hover */
        text-decoration: underline;
    }

    .hover-shadow {
        transition: box-shadow 0.3s ease;
    }

    .hover-shadow:hover {
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
</style>

{% endblock %}